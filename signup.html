<!DOCTYPE html>
<html>
<head>
  <title>Signup Test</title>
</head>
<body>
  <h2>Signup Test Form</h2>
  <form id="signupForm">
    <input type="text" name="username" placeholder="Username" required /><br />
    <input type="text" name="phone" placeholder="Phone" required /><br />
    <input type="email" name="email" placeholder="Email" required /><br />
    <input type="password" name="password" placeholder="Password" required /><br />
    <select name="role" required>
      <option value="">Select Role</option>
      <option value="Customer">Customer</option>
      <option value="Driver">Driver</option>
      <option value="Admin">Admin</option>
    </select><br />
    <div id="driver-extra" style="display: none;">
        <input type="text" id="licenseNumber" placeholder="License Number" />
        <input type="text" id="vehicleType" placeholder="Vehicle Type" />
        <input type="text" id="vehicleNumber" placeholder="Vehicle Number" />
    </div>
    <button type="submit">Sign Up</button>
  </form>

  <div id="result"></div>

  <script>
    const form = document.getElementById("signupForm");
    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const formData = new FormData(form);
      const data = Object.fromEntries(formData);
      const roleSelect = document.getElementById("role");
      const driverFields = document.getElementById("driverFields");


      const res = await fetch("http://localhost:3000/signup", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(data)
      });

      const result = await res.json();
      document.getElementById("result").innerText = JSON.stringify(result, null, 2);
    });
  </script>
</body>
</html>
